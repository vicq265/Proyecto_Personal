{"version":3,"sources":["animateheadline.js"],"names":["jQuery","document","ready","$","$headlines","duration","hideWord","$word","nextWord","takeNext","parents","hasClass","parentSpan","parent","addClass","removeClass","setTimeout","children","showWord","selectionDuration","bool","length","hideLetter","$letter","$bool","$duration","is","next","switchWord","find","eq","showLetter","animate","width","barAnimationDelay","$oldWord","$newWord","each","word","this","letters","text","split","selected","i","newLetters","join","html","css","headline","spanWrapper","newWidth","words","wordWidth"],"mappings":"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","file":"animateheadline.js","sourcesContent":["\r\njQuery(document).ready(function($){\r\n\t//set animation timing\r\n\tvar animationDelay = 2500,\r\n\t\t//loading bar effect\r\n\t\tbarAnimationDelay = 3800,\r\n\t\tbarWaiting = barAnimationDelay - 3000, //3000 is the duration of the transition on the loading bar - set in the scss/css file\r\n\t\t//letters effect\r\n\t\tlettersDelay = 50,\r\n\t\t//type effect\r\n\t\ttypeLettersDelay = 150,\r\n\t\tselectionDuration = 500,\r\n\t\ttypeAnimationDelay = selectionDuration + 800,\r\n\t\t//clip effect \r\n\t\trevealDuration = 600,\r\n\t\trevealAnimationDelay = 1500;\r\n\t\r\n\tinitHeadline();\r\n\t\r\n\r\n\tfunction initHeadline() {\r\n\t\t//insert <i> element for each letter of a changing word\r\n\t\tsingleLetters($('.cd-headline.letters').find('b'));\r\n\t\t//initialise headline animation\r\n\t\tanimateHeadline($('.cd-headline'));\r\n\t}\r\n\r\n\tfunction singleLetters($words) {\r\n\t\t$words.each(function(){\r\n\t\t\tvar word = $(this),\r\n\t\t\t\tletters = word.text().split(''),\r\n\t\t\t\tselected = word.hasClass('is-visible');\r\n\t\t\tfor (i in letters) {\r\n\t\t\t\tif(word.parents('.rotate-2').length > 0) letters[i] = '<em>' + letters[i] + '</em>';\r\n\t\t\t\tletters[i] = (selected) ? '<i class=\"in\">' + letters[i] + '</i>': '<i>' + letters[i] + '</i>';\r\n\t\t\t}\r\n\t\t    var newLetters = letters.join('');\r\n\t\t    word.html(newLetters).css('opacity', 1);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction animateHeadline($headlines) {\r\n\t\tvar duration = animationDelay;\r\n\t\t$headlines.each(function(){\r\n\t\t\tvar headline = $(this);\r\n\t\t\t\r\n\t\t\tif(headline.hasClass('loading-bar')) {\r\n\t\t\t\tduration = barAnimationDelay;\r\n\t\t\t\tsetTimeout(function(){ headline.find('.cd-words-wrapper').addClass('is-loading') }, barWaiting);\r\n\t\t\t} else if (headline.hasClass('clip')){\r\n\t\t\t\tvar spanWrapper = headline.find('.cd-words-wrapper'),\r\n\t\t\t\t\tnewWidth = spanWrapper.width() + 10\r\n\t\t\t\tspanWrapper.css('width', newWidth);\r\n\t\t\t} else if (!headline.hasClass('type') ) {\r\n\t\t\t\t//assign to . the width of its longest word\r\n\t\t\t\tvar words = headline.find('.cd-words-wrapper b'),\r\n\t\t\t\t\twidth = 0;\r\n\t\t\t\twords.each(function(){\r\n\t\t\t\t\tvar wordWidth = $(this).width();\r\n\t\t\t\t    if (wordWidth > width) width = wordWidth;\r\n\t\t\t\t});\r\n\t\t\t\theadline.find('.cd-words-wrapper').css('width', width);\r\n\t\t\t};\r\n\r\n\t\t\t//trigger animation\r\n\t\t\tsetTimeout(function(){ hideWord( headline.find('.is-visible').eq(0) ) }, duration);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction hideWord($word) {\r\n\t\tvar nextWord = takeNext($word);\r\n\t\t\r\n\t\tif($word.parents('.cd-headline').hasClass('type')) {\r\n\t\t\tvar parentSpan = $word.parent('.cd-words-wrapper');\r\n\t\t\tparentSpan.addClass('selected').removeClass('waiting');\t\r\n\t\t\tsetTimeout(function(){ \r\n\t\t\t\tparentSpan.removeClass('selected'); \r\n\t\t\t\t$word.removeClass('is-visible').addClass('is-hidden').children('i').removeClass('in').addClass('out');\r\n\t\t\t}, selectionDuration);\r\n\t\t\tsetTimeout(function(){ showWord(nextWord, typeLettersDelay) }, typeAnimationDelay);\r\n\t\t\r\n\t\t} else if($word.parents('.cd-headline').hasClass('letters')) {\r\n\t\t\tvar bool = ($word.children('i').length >= nextWord.children('i').length) ? true : false;\r\n\t\t\thideLetter($word.find('i').eq(0), $word, bool, lettersDelay);\r\n\t\t\tshowLetter(nextWord.find('i').eq(0), nextWord, bool, lettersDelay);\r\n\r\n\t\t}  else if($word.parents('.cd-headline').hasClass('clip')) {\r\n\t\t\t$word.parents('.cd-words-wrapper').animate({ width : '2px' }, revealDuration, function(){\r\n\t\t\t\tswitchWord($word, nextWord);\r\n\t\t\t\tshowWord(nextWord);\r\n\t\t\t});\r\n\r\n\t\t} else if ($word.parents('.cd-headline').hasClass('loading-bar')){\r\n\t\t\t$word.parents('.cd-words-wrapper').removeClass('is-loading');\r\n\t\t\tswitchWord($word, nextWord);\r\n\t\t\tsetTimeout(function(){ hideWord(nextWord) }, barAnimationDelay);\r\n\t\t\tsetTimeout(function(){ $word.parents('.cd-words-wrapper').addClass('is-loading') }, barWaiting);\r\n\r\n\t\t} else {\r\n\t\t\tswitchWord($word, nextWord);\r\n\t\t\tsetTimeout(function(){ hideWord(nextWord) }, animationDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction showWord($word, $duration) {\r\n\t\tif($word.parents('.cd-headline').hasClass('type')) {\r\n\t\t\tshowLetter($word.find('i').eq(0), $word, false, $duration);\r\n\t\t\t$word.addClass('is-visible').removeClass('is-hidden');\r\n\r\n\t\t}  else if($word.parents('.cd-headline').hasClass('clip')) {\r\n\t\t\t$word.parents('.cd-words-wrapper').animate({ 'width' : $word.width() + 10 }, revealDuration, function(){ \r\n\t\t\t\tsetTimeout(function(){ hideWord($word) }, revealAnimationDelay); \r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideLetter($letter, $word, $bool, $duration) {\r\n\t\t$letter.removeClass('in').addClass('out');\r\n\t\t\r\n\t\tif(!$letter.is(':last-child')) {\r\n\t\t \tsetTimeout(function(){ hideLetter($letter.next(), $word, $bool, $duration); }, $duration);  \r\n\t\t} else if($bool) { \r\n\t\t \tsetTimeout(function(){ hideWord(takeNext($word)) }, animationDelay);\r\n\t\t}\r\n\r\n\t\tif($letter.is(':last-child') && $('html').hasClass('no-csstransitions')) {\r\n\t\t\tvar nextWord = takeNext($word);\r\n\t\t\tswitchWord($word, nextWord);\r\n\t\t} \r\n\t}\r\n\r\n\tfunction showLetter($letter, $word, $bool, $duration) {\r\n\t\t$letter.addClass('in').removeClass('out');\r\n\t\t\r\n\t\tif(!$letter.is(':last-child')) { \r\n\t\t\tsetTimeout(function(){ showLetter($letter.next(), $word, $bool, $duration); }, $duration); \r\n\t\t} else { \r\n\t\t\tif($word.parents('.cd-headline').hasClass('type')) { setTimeout(function(){ $word.parents('.cd-words-wrapper').addClass('waiting'); }, 200);}\r\n\t\t\tif(!$bool) { setTimeout(function(){ hideWord($word) }, animationDelay) }\r\n\t\t}\r\n\t}\r\n\r\n\tfunction takeNext($word) {\r\n\t\treturn (!$word.is(':last-child')) ? $word.next() : $word.parent().children().eq(0);\r\n\t}\r\n\r\n\tfunction takePrev($word) {\r\n\t\treturn (!$word.is(':first-child')) ? $word.prev() : $word.parent().children().last();\r\n\t}\r\n\r\n\tfunction switchWord($oldWord, $newWord) {\r\n\t\t$oldWord.removeClass('is-visible').addClass('is-hidden');\r\n\t\t$newWord.removeClass('is-hidden').addClass('is-visible');\r\n\t}\r\n});"]}